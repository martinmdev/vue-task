(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{345:function(t,e,r){"use strict";r(48),r(47);var n=r(11),o=r(352),c=r(353),l={components:{CompareStats:r(354).default,TableStats:c.default,CardStats:o.default},layout:"covid",data:function(){return{preview:"preview",cardStats:[],compareStats:[],showCompare:!1,tableStats:[],title:null,isLoading:!1,country:null,countryNames:[],countryOptionItems:[],autoCompleteItems:[],breadCrumbItems:[],country2:null,autoCompleteCountry2:null,search:null,period:1}},mounted:function(){this.initParameters(),this.setBreadCrumbItems(),this.updateStats()},methods:{initParameters:function(){this.title="Dashboard",this.country=null,this.country2=null},setBreadCrumbItems:function(){var t=[];t.push({text:"Dashboard",disabled:!1,exact:!0,to:{name:"index"}}),this.country&&t.push({text:"Detailed view: "+this.country,exact:!0,disabled:!1,to:{name:"country",params:{country:this.country}}}),this.country2&&t.push({text:"Comparison view: "+this.country2,exact:!0,disabled:!0,to:{name:"country-compare",params:{country:this.country,compare:this.country2}}}),this.breadCrumbItems=t},asyncUpdateAll:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.$api.getAll(n);case 3:(data=r.sent).country="Global",e.cardStats=data;case 6:case"end":return r.stop()}}),r)})))()},asyncUpdateAllCountries:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.$api.getAllCountries(n);case 3:data=r.sent,e.updateCountryNames(data),e.tableStats=data;case 6:case"end":return r.stop()}}),r)})))()},updatePeriod:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.period=t,n={1:{},2:{yesterday:!0},3:{twoDaysAgo:!0}},e.updateStats(n[t]);case 3:case"end":return r.stop()}}),r)})))()},updateStats:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=t.length>0&&void 0!==t[0]?t[0]:{},console.log("BasePage updateStats"),e.asyncUpdateAll(n),e.asyncUpdateAllCountries(n);case 4:case"end":return r.stop()}}),r)})))()},asyncUpdateCountryNames:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},r.next=3,e.$api.getAllCountries(n);case 3:data=r.sent,e.updateCountryNames(data);case 5:case"end":return r.stop()}}),r)})))()},updateCountryNames:function(data){var t=[];_.forEach(data,(function(e){t.push(e.country)})),this.countryNames=t,this.countryOptionItems=this.getCountryOptionItems(t),this.autoCompleteItems=_.without(t,this.country)},getCountryOptionItems:function(t){var e=[];return e.push({value:null,text:"Global"}),_.forEach(t,(function(t){e.push({value:t,text:t})})),e},asyncUpdateCountryData:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,data;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},o=[e.country],e.country2&&o.push(e.country2),r.next=5,e.$api.getCountries(o,n);case 5:data=r.sent,_.isArray(data)?(e.compareStats=data,e.showCompare=!0):(e.cardStats=data,e.showCompare=!1);case 7:case"end":return r.stop()}}),r)})))()},redirectToCountry:function(t){if(null===t)var e={name:"index"};else e={name:"country",params:{country:t}};this.$router.replace(e)},redirectToCompare:function(t){var e={name:"country-compare",params:{country:this.country,compare:this.autoCompleteCountry2}};this.$router.replace(e)},countryChanged:function(t){this.redirectToCountry(t)}}},d=r(51),m=r(68),h=r.n(m),v=r(412),f=r(419),y=r(148),C=r(410),P=r(413),w=r(411),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-layout",[r("v-row",[r("v-col",[r("v-row",{staticClass:"mb-4"},[r("h1",[t._v(t._s(t.title))])]),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6"}},[r("v-breadcrumbs",{attrs:{items:t.breadCrumbItems,divider:">>"}})],1),t._v(" "),r("v-col",[r("div",{staticClass:"float-right"},[r("v-btn",{attrs:{depressed:1===t.period,small:""},on:{click:function(e){return t.updatePeriod(1)}}},[t._v("Today")]),t._v(" "),r("v-btn",{attrs:{depressed:2===t.period,small:""},on:{click:function(e){return t.updatePeriod(2)}}},[t._v("Yesterday")]),t._v(" "),r("v-btn",{attrs:{depressed:3===t.period,small:""},on:{click:function(e){return t.updatePeriod(3)}}},[t._v("Two days ago")])],1)])],1),t._v(" "),t.country&&!t.country2?t._t("autocomplete",[r("v-row",[r("v-col",[r("v-autocomplete",{attrs:{items:t.autoCompleteItems,loading:t.isLoading,label:"Compare to another country",placeholder:"Start typing to Search","search-input.sync":"search","no-filter":"","hide-no-data":"","hide-selected":""},on:{change:t.redirectToCompare},model:{value:t.autoCompleteCountry2,callback:function(e){t.autoCompleteCountry2=e},expression:"autoCompleteCountry2"}})],1)],1)]):t._e(),t._v(" "),t.showCompare?t._t("compareStats",[r("compare-stats",{attrs:{"stats-data":t.compareStats}})]):t._t("cardStats",[r("card-stats",{attrs:{"stats-data":t.cardStats,"country-option-items":t.countryOptionItems,country:t.country},on:{"country:changed":t.countryChanged}})]),t._v(" "),t.country||t.country2?t._e():t._t("tableStats",[r("table-stats",{attrs:{"stats-data":t.tableStats}})])],2)],1)],1)}),[],!1,null,null,null);e.a=component.exports;h()(component,{CardStats:r(352).default,CompareStats:r(354).default,TableStats:r(353).default}),h()(component,{VAutocomplete:v.a,VBreadcrumbs:f.a,VBtn:y.a,VCol:C.a,VLayout:P.a,VRow:w.a})},347:function(t,e,r){"use strict";var n=r(209),o=r.n(n),c=r(362),l={props:["statsData"],methods:{getPickProps:function(){return["country","updated","cases","deaths","recovered","active","critical","casesPerOneMillion","deathsPerOneMillion","tests"]},getPropertyToLabelMap:function(){return{country:"Country",updated:"Last updated",cases:"Total cases",todayCases:"Cases today",deaths:"Total deaths",todayDeaths:"Deaths today",recovered:"Total Recovered",todayRecovered:"Recovered today",active:"Total active",critical:"Total critical",casesPerOneMillion:"Cases per million",deathsPerOneMillion:"Deaths per million",tests:"Total tests",testsPerOneMillion:"Tests per million",population:"Population",continent:"Continent",oneCasePerPeople:"One case per people",oneDeathPerPeople:"One death per people",oneTestPerPeople:"One test per people",activePerOneMillion:"Active per million",recoveredPerOneMillion:"Recovered per million",criticalPerOneMillion:"Critical per million",affectedCountries:"Affected countries"}},getPropertyFilterMap:function(){return{updated:function(t){var e=o.a.now();return c(e-t)+" ago"}}},formatPropValue:function(t,e){var r=this.getPropertyFilterMap(),n=e;return t in r&&(n=r[t](n)),n},formatAllProps:function(object){var t=this.getPropertyFilterMap();o.a.forEach(t,(function(t,e){o.a.has(object,e)&&(object[e]=t(o.a.get(object,e)))}))}}},d=r(51),component=Object(d.a)(l,void 0,void 0,!1,null,null,null);e.a=component.exports},352:function(t,e,r){"use strict";r.r(e);var n=r(347),o=r(209),c=r.n(o),l={components:{CardSimple:r(355).default},extends:n.a,props:["countryOptionItems","country"],computed:{getComputedStatsCardsData:function(){var t=this.getPropertyToLabelMap(),e=this,data=[],r=c.a.pick(this.statsData,this.getPickProps());return c.a.forEach(r,(function(r,n){var o=e.formatPropValue(n,r),c={propName:n,name:t[n],value:o};data.push(c)})),data}},methods:{onChange:function(t){this.$emit("country:changed",t)}}},d=r(51),m=r(68),h=r.n(m),v=r(410),f=r(411),y=r(344),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",t._l(t.getComputedStatsCardsData,(function(e,n){return r("v-col",{key:n,attrs:{cols:"6"}},[r("card-simple",{attrs:{title:e.name,text:e.value},scopedSlots:t._u(["country"===e.propName?{key:"titleSelect",fn:function(){return[r("v-select",{attrs:{items:t.countryOptionItems,value:t.country,dense:"",outlined:""},on:{change:t.onChange}})]},proxy:!0}:null],null,!0)})],1)})),1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{CardSimple:r(355).default}),h()(component,{VCol:v.a,VRow:f.a,VSelect:y.a})},353:function(t,e,r){"use strict";r.r(e);r(49),r(24);var n=r(347),o=r(209),c=r.n(o),l={extends:n.a,data:function(){return{search:""}},computed:{getComputedTableHeaders:function(){var t=this.getComputedTableItems;if(t.length){var e=this.getPropertyToLabelMap(),r=[];c.a.forEach(t[0],(function(t,n){var header={text:e[n],value:n};r.push(header)})),r[0].align="start",r[0].sortable=!1}return r},getComputedTableItems:function(){var t=[],e=this,r=this.getPickProps();return c.a.forEach(this.statsData,(function(n,o){var l=c.a.pick(n,r),d=n.country,m=c.a.toLower(d);l.country=n.countryInfo,l.country.name=d,l.country.nameLowercase=m,e.formatAllProps(l),t.push(l)})),t}},methods:{customFilter:function(t,e,r){if(null==t)return!1;if(null==e)return!1;if("string"==typeof t)return!1;var n=c.a.get(r,"country.nameLowercase","");if(c.a.isString(n)){var o=c.a.toLower(e);if(n.startsWith(o))return!0}return!1}}},d=r(51),m=r(68),h=r.n(m),v=r(410),f=r(415),y=r(115),C=r(411),P=r(356),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",[r("v-col",{attrs:{cols:"3"}},[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search",placeholder:"Country","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-data-table",{attrs:{search:t.search,headers:t.getComputedTableHeaders,items:t.getComputedTableItems,"custom-filter":t.customFilter},scopedSlots:t._u([{key:"item.country",fn:function(e){var n=e.value;return[r("nuxt-link",{attrs:{to:{name:"country",params:{country:n.name}}}},[r("v-img",{staticStyle:{display:"inline-block"},attrs:{src:n.flag,width:24,height:16}}),t._v("\n          "+t._s(n.name)+"\n        ")],1)]}}])})],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VCol:v.a,VDataTable:f.a,VImg:y.a,VRow:C.a,VTextField:P.a})},354:function(t,e,r){"use strict";r.r(e);var n=r(347),o=r(209),c=r.n(o),l={extends:n.a,computed:{getComputedComparisonTableHeaders:function(){return[{align:"start",sortable:!1,value:"name"},{value:"value1"},{value:"value2"}]},getComputedComparisonTableItems:function(){var t=c.a.cloneDeep(this.statsData);this.formatAllProps(t[0]),this.formatAllProps(t[1]);var e=[],r=this.getPropertyToLabelMap();return c.a.forEach(["country","updated","casesPerOneMillion","deathsPerOneMillion","testsPerOneMillion","activePerOneMillion","recoveredPerOneMillion","criticalPerOneMillion","cases","deaths"],(function(n){var o={name:r[n],value1:t[0][n],value2:t[1][n]};e.push(o)})),e}},data:function(){return{itemsPerPage:100}}},d=r(51),m=r(68),h=r.n(m),v=r(410),f=r(415),y=r(411),component=Object(d.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-row",[e("v-col",[e("v-data-table",{attrs:{headers:this.getComputedComparisonTableHeaders,items:this.getComputedComparisonTableItems,"items-per-page":this.itemsPerPage,"hide-default-footer":""}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VCol:v.a,VDataTable:f.a,VRow:y.a})},355:function(t,e,r){"use strict";r.r(e);var n={props:["title","text"]},o=r(51),c=r(68),l=r.n(c),d=r(349),m=r(342),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),r("v-card-text",[t._t("titleSelect",[t._v("\n      "+t._s(t.text)+"\n    ")])],2)],1)}),[],!1,null,null,null);e.default=component.exports;l()(component,{VCard:d.a,VCardText:m.a,VCardTitle:m.b})}}]);